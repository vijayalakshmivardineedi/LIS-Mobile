{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\OneDrive\\\\Documents\\\\rn\\\\l\\\\src\\\\panel\\\\Security\\\\Component\\\\Barcode\\\\Sample.js\";\nimport React, { useState, useEffect } from 'react';\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport { BarCodeScanner } from 'expo-barcode-scanner';\nimport { useNavigation } from '@react-navigation/native';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { fetchVisitorVerify, resetState } from '../../../User/Redux/Slice/Security_Panel/HomeScreenSlice';\nimport MyDialog from '../../DialogBox/DialogBox';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Sample() {\n  const [hasPermission, setHasPermission] = useState(null);\n  const [scanned, setScanned] = useState(false);\n  const [societyId, setSocietyId] = useState(null);\n  const [selectedOption, setSelectedOption] = useState(null);\n  const navigation = useNavigation();\n  const dispatch = useDispatch();\n  const [showDialog, setShowDialog] = useState(false);\n  const successMessage = useSelector(state => state.homeScreen.successMessage);\n  const error = useSelector(state => state.homeScreen.error);\n  console.log(selectedOption);\n  console.log(societyId);\n  useEffect(() => {\n    const getStoredData = async () => {\n      try {\n        const user = await AsyncStorage.getItem('user');\n        if (user) {\n          const parsedUser = JSON.parse(user);\n          const id = parsedUser.societyId;\n          const option = await AsyncStorage.getItem('selectedVisitorOption');\n          if (id !== null) {\n            setSocietyId(id);\n          } else {\n            console.error('No societyId found in AsyncStorage');\n          }\n          if (option !== null) {\n            setSelectedOption(option);\n          } else {\n            console.error('No selectedVisitorOption found in AsyncStorage');\n          }\n        } else {\n          console.error('No user data found in AsyncStorage');\n        }\n      } catch (error) {\n        console.error('Error fetching data from AsyncStorage:', error);\n      }\n    };\n    getStoredData();\n  }, []);\n  useEffect(() => {\n    const getBarCodeScannerPermissions = async () => {\n      const {\n        status\n      } = await BarCodeScanner.requestPermissionsAsync();\n      setHasPermission(status === 'granted');\n    };\n    getBarCodeScannerPermissions();\n  }, []);\n  const handleBarCodeScanned = ({\n    data\n  }) => {\n    setScanned(true);\n    console.log(data);\n    const payload = {\n      societyId,\n      id: data,\n      visitorType: selectedOption\n    };\n    dispatch(fetchVisitorVerify(payload)).then(response => {\n      console.log(\"Heelo\", payload);\n      if (response.meta.requestStatus === 'fulfilled') {\n        setShowDialog(true);\n        setTimeout(() => {\n          dispatch(resetState());\n          navigation.navigate('Header');\n          setShowDialog(false);\n        }, 2000);\n      } else {\n        setShowDialog(true);\n        setTimeout(() => {\n          dispatch(resetState());\n          navigation.navigate('Header');\n          setShowDialog(false);\n        }, 2000);\n      }\n    }).catch(error => {\n      console.error('Error:', error);\n    });\n  };\n  if (hasPermission === null) {\n    return _jsxDEV(Text, {\n      children: \"Requesting camera permission...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 12\n    }, this);\n  }\n  if (hasPermission === false) {\n    return _jsxDEV(Text, {\n      children: \"No access to camera\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 12\n    }, this);\n  }\n  return _jsxDEV(View, {\n    style: styles.container,\n    children: [_jsxDEV(BarCodeScanner, {\n      onBarCodeScanned: scanned ? undefined : handleBarCodeScanned,\n      style: StyleSheet.absoluteFillObject\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }, this), _jsxDEV(MyDialog, {\n      message: successMessage || error,\n      showDialog: showDialog,\n      onClose: () => setShowDialog(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 105,\n    columnNumber: 5\n  }, this);\n}\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    flexDirection: 'column',\n    justifyContent: 'center',\n    alignItems: 'center'\n  }\n});","map":{"version":3,"names":["React","useState","useEffect","Text","View","StyleSheet","BarCodeScanner","useNavigation","AsyncStorage","useDispatch","useSelector","fetchVisitorVerify","resetState","MyDialog","jsxDEV","_jsxDEV","Sample","hasPermission","setHasPermission","scanned","setScanned","societyId","setSocietyId","selectedOption","setSelectedOption","navigation","dispatch","showDialog","setShowDialog","successMessage","state","homeScreen","error","console","log","getStoredData","user","getItem","parsedUser","JSON","parse","id","option","getBarCodeScannerPermissions","status","requestPermissionsAsync","handleBarCodeScanned","data","payload","visitorType","then","response","meta","requestStatus","setTimeout","navigate","catch","children","fileName","_jsxFileName","lineNumber","columnNumber","style","styles","container","onBarCodeScanned","undefined","absoluteFillObject","message","onClose","create","flex","flexDirection","justifyContent","alignItems"],"sources":["C:/Users/user/OneDrive/Documents/rn/l/src/panel/Security/Component/Barcode/Sample.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Text, View, StyleSheet } from 'react-native';\nimport { BarCodeScanner } from 'expo-barcode-scanner';\nimport { useNavigation } from '@react-navigation/native';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { fetchVisitorVerify, resetState} from '../../../User/Redux/Slice/Security_Panel/HomeScreenSlice';\nimport MyDialog from '../../DialogBox/DialogBox';\n\nexport default function Sample() {\n  const [hasPermission, setHasPermission] = useState(null);\n  const [scanned, setScanned] = useState(false);\n  const [societyId, setSocietyId] = useState(null);\n  const [selectedOption, setSelectedOption] = useState(null);\n  const navigation = useNavigation();\n  const dispatch = useDispatch();\n  const [showDialog, setShowDialog] = useState(false);\n  const successMessage = useSelector(state => state.homeScreen.successMessage);\n  const error = useSelector(state => state.homeScreen.error);\n\n  console.log(selectedOption)\n  console.log(societyId)\n\n\n  useEffect(() => {\n    const getStoredData = async () => {\n      try {\n        const user = await AsyncStorage.getItem('user');\n        if (user) {\n          const parsedUser = JSON.parse(user);\n          const id = parsedUser.societyId;\n          const option = await AsyncStorage.getItem('selectedVisitorOption');\n\n          if (id !== null) {\n            setSocietyId(id);\n          } else {\n            console.error('No societyId found in AsyncStorage');\n          }\n\n          if (option !== null) {\n            setSelectedOption(option);\n          } else {\n            console.error('No selectedVisitorOption found in AsyncStorage');\n          }\n        } else {\n          console.error('No user data found in AsyncStorage');\n        }\n      } catch (error) {\n        console.error('Error fetching data from AsyncStorage:', error);\n      }\n    };\n    getStoredData();\n  }, []);\n\n  useEffect(() => {\n    const getBarCodeScannerPermissions = async () => {\n      const { status } = await BarCodeScanner.requestPermissionsAsync();\n      setHasPermission(status === 'granted');\n    };\n    getBarCodeScannerPermissions();\n  }, []);\n\n  const handleBarCodeScanned = ({ data }) => {\n    setScanned(true);\n  console.log(data)\n\n    const payload = {\n      societyId,\n      id: data,\n      visitorType: selectedOption\n    };\n    dispatch(fetchVisitorVerify(payload)).then((response) => {\n      console.log(\"Heelo\",payload)\n      if (response.meta.requestStatus === 'fulfilled') {\n        setShowDialog(true);\n        setTimeout(() => {\n          dispatch(resetState());\n          navigation.navigate('Header');\n          setShowDialog(false);\n        }, 2000);\n      } else {\n        setShowDialog(true);\n        setTimeout(() => {\n          dispatch(resetState());\n          navigation.navigate('Header');\n          setShowDialog(false);\n        }, 2000);\n      }\n    }).catch((error) => {\n      console.error('Error:', error);\n    });\n  };\n\n\n\n\n  if (hasPermission === null) {\n    return <Text>Requesting camera permission...</Text>;\n  }\n  if (hasPermission === false) {\n    return <Text>No access to camera</Text>;\n  }\n\n  return (\n    <View style={styles.container}>\n      <BarCodeScanner\n        onBarCodeScanned={scanned ? undefined : handleBarCodeScanned}\n        style={StyleSheet.absoluteFillObject}\n      />\n      <MyDialog\n        message={successMessage || error}\n        showDialog={showDialog}\n        onClose={() => setShowDialog(false)}\n      />\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    flexDirection: 'column',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}