{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\OneDrive\\\\Documents\\\\rn\\\\l\\\\node_modules\\\\react-native-calendars\\\\src\\\\agenda\\\\index.js\";\nimport isFunction from 'lodash/isFunction';\nimport PropTypes from 'prop-types';\nimport XDate from 'xdate';\nimport memoize from 'memoize-one';\nimport React, { Component } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport { extractCalendarListProps, extractReservationListProps } from '../componentUpdater';\nimport { xdateToData, toMarkingFormat } from '../interface';\nimport { sameDate, sameMonth } from '../dateutils';\nimport { AGENDA_CALENDAR_KNOB } from '../testIDs';\nimport { VelocityTracker } from '../velocityTracker';\nimport { getCalendarDateString } from '../services';\nimport styleConstructor from './style';\nimport WeekDaysNames from '../commons/WeekDaysNames';\nimport CalendarList from '../calendar-list';\nimport ReservationList from './reservation-list';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst HEADER_HEIGHT = 104;\nconst KNOB_HEIGHT = 24;\nexport default class Agenda extends Component {\n  static displayName = 'Agenda';\n  static propTypes = Object.assign({}, CalendarList.propTypes, ReservationList.propTypes, {\n    items: PropTypes.object,\n    style: PropTypes.oneOfType([PropTypes.object, PropTypes.array, PropTypes.number]),\n    loadItemsForMonth: PropTypes.func,\n    onCalendarToggled: PropTypes.func,\n    onDayChange: PropTypes.func,\n    renderKnob: PropTypes.func,\n    renderList: PropTypes.func,\n    selected: PropTypes.any,\n    hideKnob: PropTypes.bool,\n    showClosingKnob: PropTypes.bool\n  });\n  scrollPad = React.createRef();\n  calendar = React.createRef();\n  knob = React.createRef();\n  list = React.createRef();\n  constructor(props) {\n    super(props);\n    this.style = styleConstructor(props.theme);\n    const windowSize = Dimensions.get('window');\n    this.viewHeight = windowSize.height;\n    this.viewWidth = windowSize.width;\n    this.scrollTimeout = undefined;\n    this.headerState = 'idle';\n    this.state = {\n      scrollY: new Animated.Value(0),\n      calendarIsReady: false,\n      calendarScrollable: false,\n      firstReservationLoad: false,\n      selectedDay: this.getSelectedDate(props.selected),\n      topDay: this.getSelectedDate(props.selected)\n    };\n    this.currentMonth = this.state.selectedDay.clone();\n    this.knobTracker = new VelocityTracker();\n    this.state.scrollY.addListener(({\n      value\n    }) => this.knobTracker.add(value));\n  }\n  componentDidMount() {\n    this._isMounted = true;\n    this.loadReservations(this.props);\n  }\n  componentWillUnmount() {\n    this._isMounted = false;\n    this.state.scrollY.removeAllListeners();\n  }\n  componentDidUpdate(prevProps, prevState) {\n    const newSelectedDate = this.getSelectedDate(this.props.selected);\n    if (!sameDate(newSelectedDate, prevState.selectedDay)) {\n      const prevSelectedDate = this.getSelectedDate(prevProps.selected);\n      if (!sameDate(newSelectedDate, prevSelectedDate)) {\n        this.setState({\n          selectedDay: newSelectedDate\n        });\n        this.calendar?.current?.scrollToDay(newSelectedDate, this.calendarOffset(), true);\n      }\n    } else if (!prevProps.items) {\n      this.loadReservations(this.props);\n    }\n  }\n  static getDerivedStateFromProps(nextProps) {\n    if (nextProps.items) {\n      return {\n        firstReservationLoad: false\n      };\n    }\n    return null;\n  }\n  getSelectedDate(date) {\n    return date ? new XDate(date) : new XDate(true);\n  }\n  calendarOffset() {\n    return 96 - this.viewHeight / 2;\n  }\n  initialScrollPadPosition = () => {\n    return Math.max(0, this.viewHeight - HEADER_HEIGHT);\n  };\n  setScrollPadPosition = (y, animated) => {\n    if (this.scrollPad?.current?.scrollTo) {\n      this.scrollPad.current.scrollTo({\n        x: 0,\n        y,\n        animated\n      });\n    } else {\n      this.scrollPad?.current?.getNode().scrollTo({\n        x: 0,\n        y,\n        animated\n      });\n    }\n  };\n  toggleCalendarPosition = open => {\n    const maxY = this.initialScrollPadPosition();\n    this.setScrollPadPosition(open ? 0 : maxY, true);\n    this.enableCalendarScrolling(open);\n  };\n  enableCalendarScrolling(enable = true) {\n    this.setState({\n      calendarScrollable: enable\n    });\n    this.props.onCalendarToggled?.(enable);\n    this.calendar?.current?.scrollToDay(this.state.selectedDay, this.calendarOffset() + 1, true);\n  }\n  loadReservations(props) {\n    if ((!props.items || !Object.keys(props.items).length) && !this.state.firstReservationLoad) {\n      this.setState({\n        firstReservationLoad: true\n      }, () => {\n        this.props.loadItemsForMonth?.(xdateToData(this.state.selectedDay));\n      });\n    }\n  }\n  onDayPress = d => {\n    this.chooseDay(d, !this.state.calendarScrollable);\n  };\n  chooseDay(d, optimisticScroll) {\n    const day = new XDate(d.dateString);\n    this.setState({\n      calendarScrollable: false,\n      selectedDay: day.clone()\n    });\n    this.props.onCalendarToggled?.(false);\n    if (!optimisticScroll) {\n      this.setState({\n        topDay: day.clone()\n      });\n    }\n    this.setScrollPadPosition(this.initialScrollPadPosition(), true);\n    this.calendar?.current?.scrollToDay(day, this.calendarOffset(), true);\n    this.props.loadItemsForMonth?.(xdateToData(day));\n    this.props.onDayPress?.(xdateToData(day));\n  }\n  generateMarkings = memoize((selectedDay, markedDates, items) => {\n    if (!markedDates) {\n      markedDates = {};\n      if (items) {\n        Object.keys(items).forEach(key => {\n          if (items[key] && items[key].length) {\n            markedDates[key] = {\n              marked: true\n            };\n          }\n        });\n      }\n    }\n    const key = toMarkingFormat(selectedDay);\n    return Object.assign({}, markedDates, {\n      [key]: Object.assign({}, markedDates[key] || {}, {\n        selected: true\n      })\n    });\n  });\n  onScrollPadLayout = () => {\n    this.setScrollPadPosition(this.initialScrollPadPosition(), false);\n    setTimeout(() => this.setState({\n      calendarIsReady: true\n    }), 0);\n  };\n  onCalendarListLayout = () => {\n    this.calendar?.current?.scrollToDay(this.state.selectedDay, this.calendarOffset(), false);\n  };\n  onLayout = event => {\n    this.viewHeight = event.nativeEvent.layout.height;\n    this.viewWidth = event.nativeEvent.layout.width;\n    this.forceUpdate();\n  };\n  onTouchStart = () => {\n    this.headerState = 'touched';\n    this.knob?.current?.setNativeProps({\n      style: {\n        opacity: 0.5\n      }\n    });\n  };\n  onTouchEnd = () => {\n    this.knob?.current?.setNativeProps({\n      style: {\n        opacity: 1\n      }\n    });\n    if (this.headerState === 'touched') {\n      const isOpen = this.state.calendarScrollable;\n      this.toggleCalendarPosition(!isOpen);\n    }\n    this.headerState = 'idle';\n  };\n  onStartDrag = () => {\n    this.headerState = 'dragged';\n    this.knobTracker.reset();\n  };\n  onSnapAfterDrag = e => {\n    this.onTouchEnd();\n    const currentY = e.nativeEvent.contentOffset.y;\n    this.knobTracker.add(currentY);\n    const projectedY = currentY + this.knobTracker.estimateSpeed() * 250;\n    const maxY = this.initialScrollPadPosition();\n    const snapY = projectedY > maxY / 2 ? maxY : 0;\n    this.setScrollPadPosition(snapY, true);\n    this.enableCalendarScrolling(snapY === 0);\n  };\n  onVisibleMonthsChange = months => {\n    this.props.onVisibleMonthsChange?.(months);\n    if (this.props.items && !this.state.firstReservationLoad) {\n      if (this.scrollTimeout) {\n        clearTimeout(this.scrollTimeout);\n      }\n      this.scrollTimeout = setTimeout(() => {\n        if (this._isMounted) {\n          this.props.loadItemsForMonth?.(months[0]);\n        }\n      }, 200);\n    }\n  };\n  onDayChange = day => {\n    const withAnimation = sameMonth(day, this.state.selectedDay);\n    this.calendar?.current?.scrollToDay(day, this.calendarOffset(), withAnimation);\n    this.setState({\n      selectedDay: day\n    });\n    this.props.onDayChange?.(xdateToData(day));\n  };\n  renderReservations() {\n    const reservationListProps = extractReservationListProps(this.props);\n    if (isFunction(this.props.renderList)) {\n      return this.props.renderList(Object.assign({}, reservationListProps, {\n        selectedDay: this.state.selectedDay,\n        topDay: this.state.topDay,\n        onDayChange: this.onDayChange\n      }));\n    }\n    return _jsxDEV(ReservationList, Object.assign({}, reservationListProps, {\n      ref: this.list,\n      selectedDay: this.state.selectedDay,\n      topDay: this.state.topDay,\n      onDayChange: this.onDayChange\n    }), void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 17\n    }, this);\n  }\n  renderCalendarList() {\n    const {\n      markedDates,\n      items\n    } = this.props;\n    const shouldHideExtraDays = this.state.calendarScrollable ? this.props.hideExtraDays : false;\n    const calendarListProps = extractCalendarListProps(this.props);\n    return _jsxDEV(CalendarList, Object.assign({}, calendarListProps, {\n      ref: this.calendar,\n      current: getCalendarDateString(this.currentMonth.toString()),\n      markedDates: this.generateMarkings(this.state.selectedDay, markedDates, items),\n      calendarWidth: this.viewWidth,\n      scrollEnabled: this.state.calendarScrollable,\n      hideExtraDays: shouldHideExtraDays,\n      onLayout: this.onCalendarListLayout,\n      onDayPress: this.onDayPress,\n      onVisibleMonthsChange: this.onVisibleMonthsChange\n    }), void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 17\n    }, this);\n  }\n  renderKnob() {\n    const {\n      showClosingKnob,\n      hideKnob,\n      renderKnob\n    } = this.props;\n    let knob = _jsxDEV(View, {\n      style: this.style.knobContainer\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 20\n    }, this);\n    if (!hideKnob) {\n      const knobView = renderKnob ? renderKnob() : _jsxDEV(View, {\n        style: this.style.knob\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 58\n      }, this);\n      knob = !this.state.calendarScrollable || showClosingKnob ? _jsxDEV(View, {\n        style: this.style.knobContainer,\n        children: _jsxDEV(View, {\n          ref: this.knob,\n          children: knobView\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 73\n      }, this) : null;\n    }\n    return knob;\n  }\n  renderWeekDaysNames = () => {\n    return _jsxDEV(WeekDaysNames, {\n      firstDay: this.props.firstDay,\n      style: this.style.dayHeader\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 17\n    }, this);\n  };\n  renderWeekNumbersSpace = () => {\n    return this.props.showWeekNumbers && _jsxDEV(View, {\n      style: this.style.dayHeader\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 46\n    }, this);\n  };\n  render() {\n    const {\n      hideKnob,\n      style,\n      testID\n    } = this.props;\n    const agendaHeight = this.initialScrollPadPosition();\n    const weekdaysStyle = [this.style.weekdays, {\n      opacity: this.state.scrollY.interpolate({\n        inputRange: [agendaHeight - HEADER_HEIGHT, agendaHeight],\n        outputRange: [0, 1],\n        extrapolate: 'clamp'\n      }),\n      transform: [{\n        translateY: this.state.scrollY.interpolate({\n          inputRange: [Math.max(0, agendaHeight - HEADER_HEIGHT), agendaHeight],\n          outputRange: [-HEADER_HEIGHT, 0],\n          extrapolate: 'clamp'\n        })\n      }]\n    }];\n    const headerTranslate = this.state.scrollY.interpolate({\n      inputRange: [0, agendaHeight],\n      outputRange: [agendaHeight, 0],\n      extrapolate: 'clamp'\n    });\n    const contentTranslate = this.state.scrollY.interpolate({\n      inputRange: [0, agendaHeight],\n      outputRange: [0, agendaHeight / 2],\n      extrapolate: 'clamp'\n    });\n    const headerStyle = [this.style.header, {\n      bottom: agendaHeight,\n      transform: [{\n        translateY: headerTranslate\n      }]\n    }];\n    if (!this.state.calendarIsReady) {\n      headerStyle.push({\n        height: 0\n      });\n      weekdaysStyle.push({\n        height: HEADER_HEIGHT\n      });\n    }\n    const openCalendarScrollPadPosition = !hideKnob && this.state.calendarScrollable && this.props.showClosingKnob ? agendaHeight + HEADER_HEIGHT : 0;\n    const shouldAllowDragging = !hideKnob && !this.state.calendarScrollable;\n    const scrollPadPosition = (shouldAllowDragging ? HEADER_HEIGHT : openCalendarScrollPadPosition) - KNOB_HEIGHT;\n    const scrollPadStyle = {\n      height: KNOB_HEIGHT,\n      top: scrollPadPosition\n    };\n    return _jsxDEV(View, {\n      testID: testID,\n      onLayout: this.onLayout,\n      style: [style, this.style.container],\n      children: [_jsxDEV(View, {\n        style: this.style.reservations,\n        children: this.renderReservations()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 9\n      }, this), _jsxDEV(Animated.View, {\n        style: headerStyle,\n        children: [_jsxDEV(Animated.View, {\n          style: [this.style.animatedContainer, {\n            transform: [{\n              translateY: contentTranslate\n            }]\n          }],\n          children: this.renderCalendarList()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 11\n        }, this), this.renderKnob()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 9\n      }, this), _jsxDEV(Animated.View, {\n        style: weekdaysStyle,\n        children: [this.renderWeekNumbersSpace(), this.renderWeekDaysNames()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 9\n      }, this), _jsxDEV(Animated.ScrollView, {\n        ref: this.scrollPad,\n        style: [this.style.scrollPadStyle, scrollPadStyle],\n        overScrollMode: \"never\",\n        showsHorizontalScrollIndicator: false,\n        showsVerticalScrollIndicator: false,\n        scrollEventThrottle: 8,\n        scrollsToTop: false,\n        onTouchStart: this.onTouchStart,\n        onTouchEnd: this.onTouchEnd,\n        onScrollBeginDrag: this.onStartDrag,\n        onScrollEndDrag: this.onSnapAfterDrag,\n        onScroll: Animated.event([{\n          nativeEvent: {\n            contentOffset: {\n              y: this.state.scrollY\n            }\n          }\n        }], {\n          useNativeDriver: true\n        }),\n        children: _jsxDEV(View, {\n          testID: AGENDA_CALENDAR_KNOB,\n          style: {\n            height: agendaHeight + KNOB_HEIGHT\n          },\n          onLayout: this.onScrollPadLayout\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 325,\n      columnNumber: 17\n    }, this);\n  }\n}","map":{"version":3,"names":["isFunction","PropTypes","XDate","memoize","React","Component","View","Dimensions","Animated","extractCalendarListProps","extractReservationListProps","xdateToData","toMarkingFormat","sameDate","sameMonth","AGENDA_CALENDAR_KNOB","VelocityTracker","getCalendarDateString","styleConstructor","WeekDaysNames","CalendarList","ReservationList","jsxDEV","_jsxDEV","HEADER_HEIGHT","KNOB_HEIGHT","Agenda","displayName","propTypes","Object","assign","items","object","style","oneOfType","array","number","loadItemsForMonth","func","onCalendarToggled","onDayChange","renderKnob","renderList","selected","any","hideKnob","bool","showClosingKnob","scrollPad","createRef","calendar","knob","list","constructor","props","theme","windowSize","get","viewHeight","height","viewWidth","width","scrollTimeout","undefined","headerState","state","scrollY","Value","calendarIsReady","calendarScrollable","firstReservationLoad","selectedDay","getSelectedDate","topDay","currentMonth","clone","knobTracker","addListener","value","add","componentDidMount","_isMounted","loadReservations","componentWillUnmount","removeAllListeners","componentDidUpdate","prevProps","prevState","newSelectedDate","prevSelectedDate","setState","current","scrollToDay","calendarOffset","getDerivedStateFromProps","nextProps","date","initialScrollPadPosition","Math","max","setScrollPadPosition","y","animated","scrollTo","x","getNode","toggleCalendarPosition","open","maxY","enableCalendarScrolling","enable","keys","length","onDayPress","d","chooseDay","optimisticScroll","day","dateString","generateMarkings","markedDates","forEach","key","marked","onScrollPadLayout","setTimeout","onCalendarListLayout","onLayout","event","nativeEvent","layout","forceUpdate","onTouchStart","setNativeProps","opacity","onTouchEnd","isOpen","onStartDrag","reset","onSnapAfterDrag","e","currentY","contentOffset","projectedY","estimateSpeed","snapY","onVisibleMonthsChange","months","clearTimeout","withAnimation","renderReservations","reservationListProps","ref","fileName","_jsxFileName","lineNumber","columnNumber","renderCalendarList","shouldHideExtraDays","hideExtraDays","calendarListProps","toString","calendarWidth","scrollEnabled","knobContainer","knobView","children","renderWeekDaysNames","firstDay","dayHeader","renderWeekNumbersSpace","showWeekNumbers","render","testID","agendaHeight","weekdaysStyle","weekdays","interpolate","inputRange","outputRange","extrapolate","transform","translateY","headerTranslate","contentTranslate","headerStyle","header","bottom","push","openCalendarScrollPadPosition","shouldAllowDragging","scrollPadPosition","scrollPadStyle","top","container","reservations","animatedContainer","ScrollView","overScrollMode","showsHorizontalScrollIndicator","showsVerticalScrollIndicator","scrollEventThrottle","scrollsToTop","onScrollBeginDrag","onScrollEndDrag","onScroll","useNativeDriver"],"sources":["C:/Users/user/OneDrive/Documents/rn/l/node_modules/react-native-calendars/src/agenda/index.js"],"sourcesContent":["import isFunction from 'lodash/isFunction';\nimport PropTypes from 'prop-types';\nimport XDate from 'xdate';\nimport memoize from 'memoize-one';\nimport React, { Component } from 'react';\nimport { View, Dimensions, Animated } from 'react-native';\nimport { extractCalendarListProps, extractReservationListProps } from '../componentUpdater';\nimport { xdateToData, toMarkingFormat } from '../interface';\nimport { sameDate, sameMonth } from '../dateutils';\nimport { AGENDA_CALENDAR_KNOB } from '../testIDs';\nimport { VelocityTracker } from '../velocityTracker';\nimport { getCalendarDateString } from '../services';\nimport styleConstructor from './style';\nimport WeekDaysNames from '../commons/WeekDaysNames';\nimport CalendarList from '../calendar-list';\nimport ReservationList from './reservation-list';\nconst HEADER_HEIGHT = 104;\nconst KNOB_HEIGHT = 24;\n/**\n * @description: Agenda component\n * @extends: CalendarList\n * @extendslink: docs/CalendarList\n * @example: https://github.com/wix/react-native-calendars/blob/master/example/src/screens/agenda.js\n * @gif: https://github.com/wix/react-native-calendars/blob/master/demo/assets/agenda.gif\n */\nexport default class Agenda extends Component {\n    static displayName = 'Agenda';\n    static propTypes = {\n        ...CalendarList.propTypes,\n        ...ReservationList.propTypes,\n        items: PropTypes.object,\n        style: PropTypes.oneOfType([PropTypes.object, PropTypes.array, PropTypes.number]),\n        loadItemsForMonth: PropTypes.func,\n        onCalendarToggled: PropTypes.func,\n        onDayChange: PropTypes.func,\n        renderKnob: PropTypes.func,\n        renderList: PropTypes.func,\n        selected: PropTypes.any,\n        hideKnob: PropTypes.bool,\n        showClosingKnob: PropTypes.bool\n    };\n    style;\n    viewHeight;\n    viewWidth;\n    scrollTimeout;\n    headerState;\n    currentMonth;\n    knobTracker;\n    _isMounted;\n    scrollPad = React.createRef();\n    calendar = React.createRef();\n    knob = React.createRef();\n    list = React.createRef();\n    constructor(props) {\n        super(props);\n        this.style = styleConstructor(props.theme);\n        const windowSize = Dimensions.get('window');\n        this.viewHeight = windowSize.height;\n        this.viewWidth = windowSize.width;\n        this.scrollTimeout = undefined;\n        this.headerState = 'idle';\n        this.state = {\n            scrollY: new Animated.Value(0),\n            calendarIsReady: false,\n            calendarScrollable: false,\n            firstReservationLoad: false,\n            selectedDay: this.getSelectedDate(props.selected),\n            topDay: this.getSelectedDate(props.selected)\n        };\n        this.currentMonth = this.state.selectedDay.clone();\n        this.knobTracker = new VelocityTracker();\n        this.state.scrollY.addListener(({ value }) => this.knobTracker.add(value));\n    }\n    componentDidMount() {\n        this._isMounted = true;\n        this.loadReservations(this.props);\n    }\n    componentWillUnmount() {\n        this._isMounted = false;\n        this.state.scrollY.removeAllListeners();\n    }\n    componentDidUpdate(prevProps, prevState) {\n        const newSelectedDate = this.getSelectedDate(this.props.selected);\n        if (!sameDate(newSelectedDate, prevState.selectedDay)) {\n            const prevSelectedDate = this.getSelectedDate(prevProps.selected);\n            if (!sameDate(newSelectedDate, prevSelectedDate)) {\n                this.setState({ selectedDay: newSelectedDate });\n                this.calendar?.current?.scrollToDay(newSelectedDate, this.calendarOffset(), true);\n            }\n        }\n        else if (!prevProps.items) {\n            this.loadReservations(this.props);\n        }\n    }\n    static getDerivedStateFromProps(nextProps) {\n        if (nextProps.items) {\n            return { firstReservationLoad: false };\n        }\n        return null;\n    }\n    getSelectedDate(date) {\n        return date ? new XDate(date) : new XDate(true);\n    }\n    calendarOffset() {\n        return 96 - this.viewHeight / 2;\n    }\n    initialScrollPadPosition = () => {\n        return Math.max(0, this.viewHeight - HEADER_HEIGHT);\n    };\n    setScrollPadPosition = (y, animated) => {\n        if (this.scrollPad?.current?.scrollTo) {\n            this.scrollPad.current.scrollTo({ x: 0, y, animated });\n        }\n        else {\n            // Support for RN O.61 (Expo 37)\n            this.scrollPad?.current?.getNode().scrollTo({ x: 0, y, animated });\n        }\n    };\n    toggleCalendarPosition = (open) => {\n        const maxY = this.initialScrollPadPosition();\n        this.setScrollPadPosition(open ? 0 : maxY, true);\n        this.enableCalendarScrolling(open);\n    };\n    enableCalendarScrolling(enable = true) {\n        this.setState({ calendarScrollable: enable });\n        this.props.onCalendarToggled?.(enable);\n        // Enlarge calendarOffset here as a workaround on iOS to force repaint.\n        // Otherwise the month after current one or before current one remains invisible.\n        // The problem is caused by overflow: 'hidden' style, which we need for dragging\n        // to be performant.\n        // Another working solution for this bug would be to set removeClippedSubviews={false}\n        // in CalendarList listView, but that might impact performance when scrolling\n        // month list in expanded CalendarList.\n        // Further info https://github.com/facebook/react-native/issues/1831\n        this.calendar?.current?.scrollToDay(this.state.selectedDay, this.calendarOffset() + 1, true);\n    }\n    loadReservations(props) {\n        if ((!props.items || !Object.keys(props.items).length) && !this.state.firstReservationLoad) {\n            this.setState({ firstReservationLoad: true }, () => {\n                this.props.loadItemsForMonth?.(xdateToData(this.state.selectedDay));\n            });\n        }\n    }\n    onDayPress = (d) => {\n        this.chooseDay(d, !this.state.calendarScrollable);\n    };\n    chooseDay(d, optimisticScroll) {\n        const day = new XDate(d.dateString);\n        this.setState({\n            calendarScrollable: false,\n            selectedDay: day.clone()\n        });\n        this.props.onCalendarToggled?.(false);\n        if (!optimisticScroll) {\n            this.setState({ topDay: day.clone() });\n        }\n        this.setScrollPadPosition(this.initialScrollPadPosition(), true);\n        this.calendar?.current?.scrollToDay(day, this.calendarOffset(), true);\n        this.props.loadItemsForMonth?.(xdateToData(day));\n        this.props.onDayPress?.(xdateToData(day));\n    }\n    generateMarkings = memoize((selectedDay, markedDates, items) => {\n        if (!markedDates) {\n            markedDates = {};\n            if (items) {\n                Object.keys(items).forEach(key => {\n                    if (items[key] && items[key].length) {\n                        markedDates[key] = { marked: true };\n                    }\n                });\n            }\n        }\n        const key = toMarkingFormat(selectedDay);\n        return { ...markedDates, [key]: { ...(markedDates[key] || {}), ...{ selected: true } } };\n    });\n    onScrollPadLayout = () => {\n        // When user touches knob, the actual component that receives touch events is a ScrollView.\n        // It needs to be scrolled to the bottom, so that when user moves finger downwards,\n        // scroll position actually changes (it would stay at 0, when scrolled to the top).\n        this.setScrollPadPosition(this.initialScrollPadPosition(), false);\n        // delay rendering calendar in full height because otherwise it still flickers sometimes\n        setTimeout(() => this.setState({ calendarIsReady: true }), 0);\n    };\n    onCalendarListLayout = () => {\n        this.calendar?.current?.scrollToDay(this.state.selectedDay, this.calendarOffset(), false);\n    };\n    onLayout = (event) => {\n        this.viewHeight = event.nativeEvent.layout.height;\n        this.viewWidth = event.nativeEvent.layout.width;\n        this.forceUpdate();\n    };\n    onTouchStart = () => {\n        this.headerState = 'touched';\n        this.knob?.current?.setNativeProps({ style: { opacity: 0.5 } });\n    };\n    onTouchEnd = () => {\n        this.knob?.current?.setNativeProps({ style: { opacity: 1 } });\n        if (this.headerState === 'touched') {\n            const isOpen = this.state.calendarScrollable;\n            this.toggleCalendarPosition(!isOpen);\n        }\n        this.headerState = 'idle';\n    };\n    onStartDrag = () => {\n        this.headerState = 'dragged';\n        this.knobTracker.reset();\n    };\n    onSnapAfterDrag = (e) => {\n        // on Android onTouchEnd is not called if dragging was started\n        this.onTouchEnd();\n        const currentY = e.nativeEvent.contentOffset.y;\n        this.knobTracker.add(currentY);\n        const projectedY = currentY + this.knobTracker.estimateSpeed() * 250; /*ms*/\n        const maxY = this.initialScrollPadPosition();\n        const snapY = projectedY > maxY / 2 ? maxY : 0;\n        this.setScrollPadPosition(snapY, true);\n        this.enableCalendarScrolling(snapY === 0);\n    };\n    onVisibleMonthsChange = (months) => {\n        this.props.onVisibleMonthsChange?.(months);\n        if (this.props.items && !this.state.firstReservationLoad) {\n            if (this.scrollTimeout) {\n                clearTimeout(this.scrollTimeout);\n            }\n            this.scrollTimeout = setTimeout(() => {\n                if (this._isMounted) {\n                    this.props.loadItemsForMonth?.(months[0]);\n                }\n            }, 200);\n        }\n    };\n    onDayChange = (day) => {\n        const withAnimation = sameMonth(day, this.state.selectedDay);\n        this.calendar?.current?.scrollToDay(day, this.calendarOffset(), withAnimation);\n        this.setState({ selectedDay: day });\n        this.props.onDayChange?.(xdateToData(day));\n    };\n    renderReservations() {\n        const reservationListProps = extractReservationListProps(this.props);\n        if (isFunction(this.props.renderList)) {\n            return this.props.renderList({\n                ...reservationListProps,\n                selectedDay: this.state.selectedDay,\n                topDay: this.state.topDay,\n                onDayChange: this.onDayChange,\n            });\n        }\n        return (<ReservationList {...reservationListProps} ref={this.list} selectedDay={this.state.selectedDay} topDay={this.state.topDay} onDayChange={this.onDayChange}/>);\n    }\n    renderCalendarList() {\n        const { markedDates, items } = this.props;\n        const shouldHideExtraDays = this.state.calendarScrollable ? this.props.hideExtraDays : false;\n        const calendarListProps = extractCalendarListProps(this.props);\n        return (<CalendarList {...calendarListProps} ref={this.calendar} current={getCalendarDateString(this.currentMonth.toString())} markedDates={this.generateMarkings(this.state.selectedDay, markedDates, items)} calendarWidth={this.viewWidth} scrollEnabled={this.state.calendarScrollable} hideExtraDays={shouldHideExtraDays} onLayout={this.onCalendarListLayout} onDayPress={this.onDayPress} onVisibleMonthsChange={this.onVisibleMonthsChange}/>);\n    }\n    renderKnob() {\n        const { showClosingKnob, hideKnob, renderKnob } = this.props;\n        let knob = <View style={this.style.knobContainer}/>;\n        if (!hideKnob) {\n            const knobView = renderKnob ? renderKnob() : <View style={this.style.knob}/>;\n            knob = !this.state.calendarScrollable || showClosingKnob ? (<View style={this.style.knobContainer}>\n          <View ref={this.knob}>{knobView}</View>\n        </View>) : null;\n        }\n        return knob;\n    }\n    renderWeekDaysNames = () => {\n        return (<WeekDaysNames firstDay={this.props.firstDay} style={this.style.dayHeader}/>);\n    };\n    renderWeekNumbersSpace = () => {\n        return this.props.showWeekNumbers && <View style={this.style.dayHeader}/>;\n    };\n    render() {\n        const { hideKnob, style, testID } = this.props;\n        const agendaHeight = this.initialScrollPadPosition();\n        const weekdaysStyle = [\n            this.style.weekdays,\n            {\n                opacity: this.state.scrollY.interpolate({\n                    inputRange: [agendaHeight - HEADER_HEIGHT, agendaHeight],\n                    outputRange: [0, 1],\n                    extrapolate: 'clamp'\n                }),\n                transform: [\n                    {\n                        translateY: this.state.scrollY.interpolate({\n                            inputRange: [Math.max(0, agendaHeight - HEADER_HEIGHT), agendaHeight],\n                            outputRange: [-HEADER_HEIGHT, 0],\n                            extrapolate: 'clamp'\n                        })\n                    }\n                ]\n            }\n        ];\n        const headerTranslate = this.state.scrollY.interpolate({\n            inputRange: [0, agendaHeight],\n            outputRange: [agendaHeight, 0],\n            extrapolate: 'clamp'\n        });\n        const contentTranslate = this.state.scrollY.interpolate({\n            inputRange: [0, agendaHeight],\n            outputRange: [0, agendaHeight / 2],\n            extrapolate: 'clamp'\n        });\n        const headerStyle = [\n            this.style.header,\n            {\n                bottom: agendaHeight,\n                transform: [{ translateY: headerTranslate }]\n            }\n        ];\n        if (!this.state.calendarIsReady) {\n            // limit header height until everything is setup for calendar dragging\n            headerStyle.push({ height: 0 });\n            // fill header with appStyle.calendarBackground background to reduce flickering\n            weekdaysStyle.push({ height: HEADER_HEIGHT });\n        }\n        const openCalendarScrollPadPosition = !hideKnob && this.state.calendarScrollable && this.props.showClosingKnob ? agendaHeight + HEADER_HEIGHT : 0;\n        const shouldAllowDragging = !hideKnob && !this.state.calendarScrollable;\n        const scrollPadPosition = (shouldAllowDragging ? HEADER_HEIGHT : openCalendarScrollPadPosition) - KNOB_HEIGHT;\n        const scrollPadStyle = {\n            height: KNOB_HEIGHT,\n            top: scrollPadPosition,\n        };\n        return (<View testID={testID} onLayout={this.onLayout} style={[style, this.style.container]}>\n        <View style={this.style.reservations}>{this.renderReservations()}</View>\n        <Animated.View style={headerStyle}>\n          <Animated.View style={[this.style.animatedContainer, { transform: [{ translateY: contentTranslate }] }]}>\n            {this.renderCalendarList()}\n          </Animated.View>\n          {this.renderKnob()}\n        </Animated.View>\n        <Animated.View style={weekdaysStyle}>\n          {this.renderWeekNumbersSpace()}\n          {this.renderWeekDaysNames()}\n        </Animated.View>\n        <Animated.ScrollView ref={this.scrollPad} style={[this.style.scrollPadStyle, scrollPadStyle]} overScrollMode=\"never\" showsHorizontalScrollIndicator={false} showsVerticalScrollIndicator={false} scrollEventThrottle={8} scrollsToTop={false} onTouchStart={this.onTouchStart} onTouchEnd={this.onTouchEnd} onScrollBeginDrag={this.onStartDrag} onScrollEndDrag={this.onSnapAfterDrag} onScroll={Animated.event([{ nativeEvent: { contentOffset: { y: this.state.scrollY } } }], { useNativeDriver: true })}>\n          <View testID={AGENDA_CALENDAR_KNOB} style={{ height: agendaHeight + KNOB_HEIGHT }} onLayout={this.onScrollPadLayout}/>\n        </Animated.ScrollView>\n      </View>);\n    }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}