{"ast":null,"code":"import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nexport const userLogin = createAsyncThunk(\"auth/userLogin\", async ({\n  email,\n  password\n}, {\n  rejectWithValue\n}) => {\n  try {\n    const response = await axios.post(\"http://192.168.29.226:2000/api/user/userSignin\", {\n      email,\n      password\n    });\n    return response.data;\n  } catch (err) {\n    return rejectWithValue(err.response.data);\n  }\n});\nconst userSlice = createSlice({\n  name: \"auth\",\n  initialState: {\n    user: null,\n    token: null,\n    loading: false,\n    error: null\n  },\n  reducers: {\n    logout: state => {\n      state.user = null;\n      state.token = null;\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(userLogin.pending, state => {\n      state.loading = true;\n      state.error = null;\n    }).addCase(userLogin.fulfilled, (state, action) => {\n      state.loading = false;\n      state.user = action.payload.profile;\n      state.token = action.payload.token;\n      const {\n        _id,\n        name,\n        role,\n        societyId,\n        userId,\n        buildingName,\n        flatNumber,\n        societyName,\n        sequrityId,\n        userType\n      } = action.payload.profile;\n      const userData = {\n        _id,\n        sequrityId,\n        userId,\n        name,\n        role,\n        societyId,\n        societyName,\n        buildingName,\n        flatNumber,\n        userType\n      };\n      const userDataString = JSON.stringify(userData);\n      AsyncStorage.setItem('user', userDataString);\n    }).addCase(userLogin.rejected, (state, action) => {\n      state.loading = false;\n      state.error = action.payload.message;\n    });\n  }\n});\nexport const {\n  logout\n} = userSlice.actions;\nexport default userSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","axios","AsyncStorage","userLogin","email","password","rejectWithValue","response","post","data","err","userSlice","name","initialState","user","token","loading","error","reducers","logout","state","extraReducers","builder","addCase","pending","fulfilled","action","payload","profile","_id","role","societyId","userId","buildingName","flatNumber","societyName","sequrityId","userType","userData","userDataString","JSON","stringify","setItem","rejected","message","actions","reducer"],"sources":["C:/Users/user/OneDrive/Documents/rn/l/src/panel/User/Redux/Slice/AuthSlice/Login/LoginSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\r\nimport axios from \"axios\";\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\n\r\nexport const userLogin = createAsyncThunk(\r\n    \"auth/userLogin\",\r\n    async ({ email, password }, { rejectWithValue }) => {\r\n        try {\r\n            const response = await axios.post(\r\n                \"http://192.168.29.226:2000/api/user/userSignin\",\r\n                {\r\n                    email,\r\n                    password,\r\n                }\r\n            );\r\n            return response.data;\r\n        } catch (err) {\r\n            return rejectWithValue(err.response.data);\r\n        }\r\n    }\r\n);\r\n\r\nconst userSlice = createSlice({\r\n    name: \"auth\",\r\n    initialState: {\r\n        user: null,\r\n        token: null,\r\n        loading: false,\r\n        error: null,\r\n    },\r\n    reducers: {\r\n        logout: (state) => {\r\n            state.user = null;\r\n            state.token = null;\r\n        },\r\n    },\r\n\r\n    extraReducers: (builder) => {\r\n        builder\r\n            .addCase(userLogin.pending, (state) => {\r\n                state.loading = true;\r\n                state.error = null;\r\n            })\r\n            .addCase(userLogin.fulfilled, (state, action) => {\r\n                state.loading = false;\r\n                state.user = action.payload.profile;\r\n                state.token = action.payload.token;\r\n                const { _id, name, role, societyId, userId, buildingName, flatNumber, societyName, sequrityId, userType } = action.payload.profile;\r\n                const userData = {\r\n                    _id,\r\n                    sequrityId,\r\n                    userId,\r\n                    name,\r\n                    role,\r\n                    societyId, societyName,\r\n                    buildingName, flatNumber, userType\r\n                };\r\n                const userDataString = JSON.stringify(userData);\r\n                AsyncStorage.setItem('user', userDataString)\r\n            })\r\n            .addCase(userLogin.rejected, (state, action) => {\r\n                state.loading = false;\r\n                state.error = action.payload.message;\r\n            });\r\n    },\r\n});\r\n\r\nexport const { logout } = userSlice.actions;\r\nexport default userSlice.reducer;\r\n"],"mappings":"AAAA,SAASA,WAAW,EAAEC,gBAAgB,QAAQ,kBAAkB;AAChE,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,YAAY,MAAM,2CAA2C;AAEpE,OAAO,MAAMC,SAAS,GAAGH,gBAAgB,CACrC,gBAAgB,EAChB,OAAO;EAAEI,KAAK;EAAEC;AAAS,CAAC,EAAE;EAAEC;AAAgB,CAAC,KAAK;EAChD,IAAI;IACA,MAAMC,QAAQ,GAAG,MAAMN,KAAK,CAACO,IAAI,CAC7B,gDAAgD,EAChD;MACIJ,KAAK;MACLC;IACJ,CACJ,CAAC;IACD,OAAOE,QAAQ,CAACE,IAAI;EACxB,CAAC,CAAC,OAAOC,GAAG,EAAE;IACV,OAAOJ,eAAe,CAACI,GAAG,CAACH,QAAQ,CAACE,IAAI,CAAC;EAC7C;AACJ,CACJ,CAAC;AAED,MAAME,SAAS,GAAGZ,WAAW,CAAC;EAC1Ba,IAAI,EAAE,MAAM;EACZC,YAAY,EAAE;IACVC,IAAI,EAAE,IAAI;IACVC,KAAK,EAAE,IAAI;IACXC,OAAO,EAAE,KAAK;IACdC,KAAK,EAAE;EACX,CAAC;EACDC,QAAQ,EAAE;IACNC,MAAM,EAAGC,KAAK,IAAK;MACfA,KAAK,CAACN,IAAI,GAAG,IAAI;MACjBM,KAAK,CAACL,KAAK,GAAG,IAAI;IACtB;EACJ,CAAC;EAEDM,aAAa,EAAGC,OAAO,IAAK;IACxBA,OAAO,CACFC,OAAO,CAACpB,SAAS,CAACqB,OAAO,EAAGJ,KAAK,IAAK;MACnCA,KAAK,CAACJ,OAAO,GAAG,IAAI;MACpBI,KAAK,CAACH,KAAK,GAAG,IAAI;IACtB,CAAC,CAAC,CACDM,OAAO,CAACpB,SAAS,CAACsB,SAAS,EAAE,CAACL,KAAK,EAAEM,MAAM,KAAK;MAC7CN,KAAK,CAACJ,OAAO,GAAG,KAAK;MACrBI,KAAK,CAACN,IAAI,GAAGY,MAAM,CAACC,OAAO,CAACC,OAAO;MACnCR,KAAK,CAACL,KAAK,GAAGW,MAAM,CAACC,OAAO,CAACZ,KAAK;MAClC,MAAM;QAAEc,GAAG;QAAEjB,IAAI;QAAEkB,IAAI;QAAEC,SAAS;QAAEC,MAAM;QAAEC,YAAY;QAAEC,UAAU;QAAEC,WAAW;QAAEC,UAAU;QAAEC;MAAS,CAAC,GAAGX,MAAM,CAACC,OAAO,CAACC,OAAO;MAClI,MAAMU,QAAQ,GAAG;QACbT,GAAG;QACHO,UAAU;QACVJ,MAAM;QACNpB,IAAI;QACJkB,IAAI;QACJC,SAAS;QAAEI,WAAW;QACtBF,YAAY;QAAEC,UAAU;QAAEG;MAC9B,CAAC;MACD,MAAME,cAAc,GAAGC,IAAI,CAACC,SAAS,CAACH,QAAQ,CAAC;MAC/CpC,YAAY,CAACwC,OAAO,CAAC,MAAM,EAAEH,cAAc,CAAC;IAChD,CAAC,CAAC,CACDhB,OAAO,CAACpB,SAAS,CAACwC,QAAQ,EAAE,CAACvB,KAAK,EAAEM,MAAM,KAAK;MAC5CN,KAAK,CAACJ,OAAO,GAAG,KAAK;MACrBI,KAAK,CAACH,KAAK,GAAGS,MAAM,CAACC,OAAO,CAACiB,OAAO;IACxC,CAAC,CAAC;EACV;AACJ,CAAC,CAAC;AAEF,OAAO,MAAM;EAAEzB;AAAO,CAAC,GAAGR,SAAS,CAACkC,OAAO;AAC3C,eAAelC,SAAS,CAACmC,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}